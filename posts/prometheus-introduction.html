<!doctype html>
<html lang="en">
<head>

  <link href="https://fonts.googleapis.com/css?family=Cormorant+Garamond:700;subset=cyrillic" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700;subset=cyrillic" rel="stylesheet">

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Taylor Tech Blog | Introducing Prometheus</title>
  <meta name="description" content="Drone Simulation and Monitoring Application">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Introducing Prometheus">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://taylortechblog.com/posts/prometheus-introduction">
  <meta property="og:description" content="Drone Simulation and Monitoring Application">
  <meta property="og:site_name" content="Taylor Tech Blog">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://taylortechblog.com/posts/prometheus-introduction">
  <meta name="twitter:title" content="Introducing Prometheus">
  <meta name="twitter:description" content="Drone Simulation and Monitoring Application">

  
    <meta property="og:image" content="https://taylortechblog.com/assets/og-image-fc49afbe81c2cf02482ce6870323ff144e22adf8ea4ccb5b310dff1d643f4cff.jpg">
    <meta name="twitter:image" content="https://taylortechblog.com/assets/og-image-fc49afbe81c2cf02482ce6870323ff144e22adf8ea4ccb5b310dff1d643f4cff.jpg">
  

  <link href="https://taylortechblog.com/feed.xml" type="application/rss+xml" rel="alternate" title="Taylor Tech Blog Last 10 blog posts" />

  

  

    
      <link rel="icon" type="image/x-icon" href="/assets/favicon-light-357fb30d046a097b38719acab848446b32a59e4bf916ea4ba688c45c2601228d.ico">
      <link rel="apple-touch-icon" href="/assets/apple-touch-icon-light-469018fe0ed73bb6dc614541657f5659d5d82b946c0c5ebc9f6172e8692895e4.png">
      <link rel="stylesheet" type="text/css" title="light" id="light" href="/assets/light-502d62a432584e4baa3a0cfa5c2bd8042ae86470d4366a62f5ca4e93a9693070.css">
      <link rel="stylesheet" type="text/css" title="dark" id="dark" href="/assets/dark-3a5944d547c08719f244f13525b9330df44741048e607c31e71a4c6cad271a05.css" disabled="true">
    

  

</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="Taylor Tech Blog">Taylor Tech Blog</a>
  <ul class="header-links">
    
      <li>
        <a href="/about" title="About me">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-about">
  <use href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about" xlink:href="/assets/about-ecf154b571ab8034ae00aeed91a3b7ad68db80b46d958753ad6216c919486e88.svg#icon-about"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a href="https://github.com/jdtaylor7" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/jdtaylor7" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a href="mailto:jdtaylor7@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email" xlink:href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a onclick="toggle()" title="Toggle Theme">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-theme">
  <use href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme" xlink:href="/assets/theme-66869e0bf8dab34bae1c86bda400327b772e0be69e8dc28d3ede896e771320ed.svg#icon-theme"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>



        <article class="article scrollappear">
          <header class="article-header">
            <h1>Introducing Prometheus</h1>
            <p>Drone Simulation and Monitoring Application</p>
            <div class="article-list-footer">
  <span class="article-list-date">
    September 1, 2020
  </span>
  <span class="article-list-divider">-</span>
  <span class="article-list-minutes">
    
    
      5 minute read
    
  </span>
  <span class="article-list-divider">-</span>
  <div class="article-list-tags">
    
      
      <a href="/tag/cpp" title="See all posts with tag 'C++'">C++</a>
    
      
      <a href="/tag/drone" title="See all posts with tag 'Drone'">Drone</a>
    
      
      <a href="/tag/opengl" title="See all posts with tag 'OpenGL'">OpenGL</a>
    
  </div>
</div>
          </header>

          <div class="article-content">
            <p align="center">
<a href="/assets/prometheus_logo-fbd3b61536ee2cd387dd455f6af8e3d48b1de4e172865c5235c50671dc64c2b7.png">
  <img src="/assets/prometheus_logo-fbd3b61536ee2cd387dd455f6af8e3d48b1de4e172865c5235c50671dc64c2b7.png" alt="prometheus logo" class="zooming" data-rjs="/assets/prometheus_logo-fbd3b61536ee2cd387dd455f6af8e3d48b1de4e172865c5235c50671dc64c2b7.png" data-zooming-width="463" data-zooming-height="236" />
</a>

</p>

<p>In my last post, I introduced a hobby drone project I have been working on
recently. In that post I laid out the scope and goals of the project as a whole,
without going into details about any single component. This post will start
discussing the first major milestone of the project:
<a href="https://github.com/jdtaylor7/prometheus">Prometheus</a>, a desktop application I
wrote to streamline the process of building a drone system. In its final
iteration, it will be a multifaceted tool capable of:</p>

<ul>
  <li>Simulating a drone system</li>
  <li>Refining a drone system’s control algorithm</li>
  <li>Monitoring a running drone system in real-time</li>
</ul>

<p>The first goal was to achieve monitoring capabilities. As of the tool’s most
recent v0.2.1 release on Github, monitoring has been implemented. When provided
with a stream of real-time drone data (position and orientation data),
Prometheus visually represents the state of the drone in a 3D environment. A
short demo of the tool is below:</p>

<p><a href="/assets/prometheus_demo-0d086aced8ac481a00b7abc168a15150323b32caea74d535d0a6acdd4826923e.gif">
  <img src="/assets/prometheus_demo-0d086aced8ac481a00b7abc168a15150323b32caea74d535d0a6acdd4826923e.gif" alt="prometheus demo gif" class="zooming" data-rjs="/assets/prometheus_demo-0d086aced8ac481a00b7abc168a15150323b32caea74d535d0a6acdd4826923e.gif" data-zooming-width="900" data-zooming-height="675" />
</a></p>

<p>This demo shows Prometheus receiving data from a “drone” (just an Arduino in
this case) and plotting that data while also using the data to position the
drone model in the 3D environment. The data in question is noisy data centered
about position (0, 2, 0) and orientation (0, 0, 0).</p>

<p>For simplicity’s sake, I’ll be referring to Prometheus as a “simulator”
throughout this post.</p>

<h3 id="interface">Interface</h3>

<p>The 3D environment is fully navigable, allowing the user to view the room and
model from any angle. There are also sets of windows along the left and right
sides of the screen.</p>

<p><a href="/assets/prometheus_screenshot-0c5c23dd672e25d39e9d050c6797ffabfb00066ebf0dbc9ef766f35fdb60e853.png">
  <img src="/assets/prometheus_screenshot-0c5c23dd672e25d39e9d050c6797ffabfb00066ebf0dbc9ef766f35fdb60e853.png" alt="prometheus screenshot" class="zooming" data-rjs="/assets/prometheus_screenshot-0c5c23dd672e25d39e9d050c6797ffabfb00066ebf0dbc9ef766f35fdb60e853.png" data-zooming-width="1204" data-zooming-height="930" />
</a></p>

<p>The windows along the left side of the screen display information to the user:</p>

<ul>
  <li>FPS: Number of frames per second (which is locked at 60fps)</li>
  <li>Drone data: The current position and orientation values being read from the
connected drone system, with plots of those values over time</li>
  <li>Camera data: Position and orientation data for the camera, mostly for
debugging</li>
</ul>

<p>The windows along the right are for interacting with the simulator:</p>

<ul>
  <li>Application mode: Choosing how to run the simulator. Currently there are just
two modes, telemetry and edit. Telemetry mode is for reading data from the
drone, while edit mode is for repositioning the camera and drone manually</li>
  <li>Controls: Changes depending on the application mode. Telemetry mode, for
example, allows the user to see available devices, connect to one, and ensure
that the correct device is being read</li>
</ul>

<p>The interface will change and grow in scope as simulation capabilities and other
features are added to Prometheus.</p>

<h3 id="graphics">Graphics</h3>

<p>Personally, I highly value visual representation of data. If I can hold a drone
in my hand, rotate it, and see that movement matched in a graphical environment,
then I can easily check the correctness of the data pipeline, sensors, control
algorithm, etc. Thus, this is a core requirement of the simulator.</p>

<p>To achieve this, I decided to implement the graphical component of the tool in
OpenGL. Since I had not touched OpenGL before, I leaned heavily on
<a href="https://learnopengl.com/">LearnOpenGL</a>, which is an excellent tutorial provided
by Joey de Vries. If you are interested in learning OpenGL yourself I would
highly recommend it as a resource.</p>

<p>I also wanted the simulator to have a fun and futuristic feel to it. Because of
this, I chose to implement not just basic shape and texture rendering, but also
model loading and rudimentary lighting. The small blue cube in the environment
is one of these light sources.</p>

<h3 id="communication-interfaces">Communication Interfaces</h3>

<p>As mentioned in the previous section, Prometheus must be able to receive data
from a drone system. I have chosen to implement this communication interface in
hardware as a custom pair of wireless transmitter/receiver PCBs. The transmitter
is located on the drone itself, connected to the drone’s flight computer. The
receiver (the ground station) connects to a desktop via USB.</p>

<p>For simplicity’s sake, the ground station imitates a serial device over USB,
just like an Arduino. Whenever this board receives a telemetry packet from the
drone, it will forward that data to the simulator via the desktop. In the demo
at the beginning of this post, the data is being generated from an Arduino UNO.
For testing purposes, Arduino boards can serve as a quick substitute for the
custom ground station hardware that I am building.</p>

<p>Serial communication was handled with the excellent
<a href="https://github.com/crayzeewulf/libserial/">LibSerial</a> library. While the serial
connections provided by the library are synchronous, Prometheus has no real need
for asynchronous reads/writes so this works just fine for our purposes.</p>

<h3 id="technologies">Technologies</h3>

<p>The simulator is written in C++17 on top of raw OpenGL. Some additional third
party libraries support the graphics side of the codebase, which can be found in
the <code class="language-plaintext highlighter-rouge">third_party</code>
<a href="https://github.com/jdtaylor7/prometheus/tree/master/third_party">directory</a> of
the repository. CMake is the build system of choice.</p>

<p>At the moment the tool is supported on Arch Linux and Ubuntu Focal (20.04 LTS).
A CircleCI pipeline tests compatibility with these environments via associated
Docker images. This CI pipeline may be the topic of a future post.</p>

<h3 id="other-dependencies">Other Dependencies</h3>

<p>As mentioned, a number of dependencies are included in the project, mostly in
support of the graphical functionality. Other dependencies include GLFW for
windowing, DearImgui for the user interface, and Libserial for USB support.</p>

<p>All dependencies that need to be installed manually are detailed in the Github
repository’s <a href="https://github.com/jdtaylor7/prometheus#dependencies">README</a>.</p>

<p>As a side note, the tool also has a dependency on a small bounded buffer library
that I wrote recently. It provides a variety of interfaces, is thread-safe, and
is written in C++17. If this sounds interesting, the repository is located
<a href="https://github.com/jdtaylor7/bounded_buffer">here</a>. Parts
<a href="https://www.taylortechblog.com/posts/cpp-bounded-buffer-1">1</a> and
<a href="https://www.taylortechblog.com/posts/cpp-bounded-buffer-2">2</a> of the blog post
I wrote about it are available as well.</p>

<h3 id="conclusion">Conclusion</h3>

<p>Prometheus is officially up and running and can be used to debug control
algorithms by displaying drone telemetry data, which was my goal for this
release of the tool. My focus will now be shifting towards the development of
the control algorithms and the drone’s flight software. More posts about these
topics are soon to follow.</p>

<p>As always, suggestions and feedback are welcome!</p>

          </div>

          <div class="reach-out">
            <center>
              <em>For questions or comments, please reach out via
                <a href="mailto:jdtaylor7@gmail.com" title="Send email">
                  email
                </a>.
              </em>
            </center>
          </div>
        </article>
        <footer class="footer scrollappear">
  <p>
    <center>
      Copyright &copy; <script src="/assets/date-eae756b980bd4bbfa32965a140a6f6021c09f878940a31de665d4c44d6c00f65.js" type="text/javascript"></script> Jordan Taylor
    </center>
  </p>
</footer>

      </div>
    </div>
  </main>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177181376-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-177181376-1');
  </script>


<script src="/assets/vendor-1a8f6e33220f845e569c20b3c09a5d43f87908ea7168ea139ce2135770f7b1b5.js" type="text/javascript"></script>


  <script src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js" type="text/javascript"></script>


<script src="/assets/application-cfde13ac81ddaf4351b2e739603e2baf688d0fcc9aba613fe62bbb1c7b037fb9.js" type="text/javascript"></script>


  <script src="/assets/themetoggle-df0d3d73164dc26dffbd630182ae4d0dfa7bee6b694a2b5d565d73595b582bbf.js" type="text/javascript"></script>


</body>
</html>
